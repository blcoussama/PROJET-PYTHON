{% extends "base.html" %}

{% block content %}
<section style="
    background:#007bff; color:#fff; text-align:center;
    padding:3rem 1rem; border-radius:6px; margin-bottom:2rem;
  ">
    <h1>Bienvenue sur BlogPlatform</h1>
    <p>Découvrez, créez et partagez vos articles avec la communauté</p>
    {% if not user %}
    <div style="margin-top:1rem;">
        <a href="/register" style="
            background:#fff; color:#007bff; padding:.6rem 1.2rem;
            border-radius:4px; text-decoration:none; margin-right:.5rem;
          ">
            <i class="fas fa-user-plus"></i> Créer un compte
        </a>
        <a href="/login" style="
            background:#fff; color:#007bff; padding:.6rem 1.2rem;
            border-radius:4px; text-decoration:none;
          ">
            <i class="fas fa-sign-in-alt"></i> Se connecter
        </a>
    </div>
    {% endif %}
</section>

<section>
    <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:1rem;">
        <h2>Articles récents</h2>
        {% if user %}
        <a href="/create-article" style="
            background:#007bff; color:#fff; padding:.5rem 1rem;
            border-radius:4px; text-decoration:none;
          ">
            <i class="fas fa-plus"></i> Nouvel article
        </a>
        {% endif %}
    </div>

    {% if articles %}
    <div style="
        display:grid; grid-template-columns:repeat(auto-fill,minmax(260px,1fr));
        gap:1.5rem;
      ">
        {% for a in articles %}
        <article style="
            background:#fff; border-radius:6px; box-shadow:0 2px 4px rgba(0,0,0,0.1);
            overflow:hidden; display:flex; flex-direction:column;
          ">
            {% if a.image_url %}
            <img src="{{ a.image_url }}" alt="{{ a.title }}" style="width:100%; display:block;">
            {% endif %}
            <div style="padding:1rem; flex:1; display:flex; flex-direction:column;">
                <h3 style="margin-bottom:.5rem;">
                    <a href="/article/{{ a.id }}" style="color:#007bff; text-decoration:none;">
                        {{ a.title }}
                    </a>
                </h3>
                <small style="color:#666;">
                    <i class="fas fa-user"></i> {{ a.author_name }}
                    &nbsp;|&nbsp;
                    <i class="fas fa-calendar"></i> {{ a.created_at | format_date }}
                </small>
                <p style="margin:1rem 0; flex:1;">{{ a.content | truncate(150) }}</p>
                <div style="display:flex; gap:1rem;">
                    <span><i class="fas fa-heart"></i> {{ a.likes_count }}</span>
                    <span><i class="fas fa-comment"></i> {{ a.comments_count }}</span>
                </div>
            </div>
        </article>
        {% endfor %}
    </div>
    {% else %}
    <p style="text-align:center;">Aucun article pour le moment.</p>
    {% endif %}
</section>
{% endblock %}