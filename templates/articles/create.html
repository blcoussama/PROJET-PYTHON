{% extends "base.html" %}

{% block styles %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/articles/create.css') }}">
{% endblock %}

{% block content %}

<div class="article-container">
    <h2 style="margin-bottom: 1.5rem; text-align: center;"><i class="fas fa-edit"></i> Créer un article</h2>

    <!-- Draft restoration banner (hidden by default) -->
    <div class="restore-draft-banner" id="draftBanner" style="display: none;">
        <div>
            <i class="fas fa-save"></i>
            <strong>Brouillon trouvé :</strong> Des modifications non sauvegardées ont été trouvées. Voulez-vous les
            restaurer ?
        </div>
        <div class="actions">
            <button type="button" class="btn-restore" id="restoreDraft">
                <i class="fas fa-undo"></i> Restaurer
            </button>
            <button type="button" class="btn-dismiss" id="dismissDraft">
                <i class="fas fa-times"></i> Ignorer
            </button>
        </div>
    </div>

    <!-- Preserved original form structure with enhanced styling -->
    <form method="POST" action="/create-article" enctype="multipart/form-data" class="create-form" id="articleForm">
        <!-- Champ "Titre" (preserved original structure) -->
        <div class="form-group">
            <label for="title">
                <i class="fas fa-heading"></i>
                Titre
            </label>
            <input type="text" id="title" name="title" class="form-control" required
                placeholder="Entrez le titre de votre article" maxlength="200">
            <div class="char-counter" id="titleCounter">0/200</div>
        </div>

        <!-- NOUVEAU Champ "Description" (preserved original structure) -->
        <div class="form-group">
            <label for="description">
                <i class="fas fa-align-left"></i>
                Description (optionnelle)
            </label>
            <textarea id="description" name="description" class="form-control" rows="3"
                placeholder="Ajoutez une brève description de votre article..." maxlength="500"></textarea>
            <div class="char-counter" id="descCounter">0/500</div>
        </div>

        <!-- CHAMP "Upload d'image" (preserved original structure with enhanced UI) -->
        <div class="form-group">
            <label>
                <i class="fas fa-image"></i>
                Image (PNG/JPG/JPEG, optionnelle)
            </label>
            <div class="file-input-wrapper">
                <input type="file" id="image" name="image" class="file-input"
                    accept=".png,.jpg,.jpeg,image/png,image/jpeg">
                <label for="image" class="file-input-label" id="fileLabel">
                    <i class="fas fa-cloud-upload-alt"></i>
                    <span>Cliquez pour sélectionner une image ou glissez-déposez</span>
                </label>
            </div>
            <div class="file-preview" id="filePreview">
                <img id="previewImage" alt="Aperçu">
                <div class="file-info">
                    <span id="fileName"></span>
                    <button type="button" class="remove-file" id="removeFile">
                        <i class="fas fa-times"></i> Supprimer
                    </button>
                </div>
            </div>
        </div>

        <!-- Champ "Contenu" (preserved original structure) -->
        <div class="form-group">
            <label for="content">
                <i class="fas fa-file-alt"></i>
                Contenu
            </label>
            <textarea id="content" name="content" class="form-control content-textarea" rows="10" required
                placeholder="Rédigez le contenu de votre article..." maxlength="10000"></textarea>
            <div class="char-counter" id="contentCounter">0/10000</div>
        </div>

        <!-- Bouton "Publier" (preserved original structure with enhanced styling) -->
        <button type="submit" class="btn-submit" id="submitBtn">
            <i class="fas fa-plus"></i> Publier l'article
        </button>
    </form>
</div>

{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='js/articles/create.js') }}"></script>
{% endblock %}