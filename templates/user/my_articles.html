{% extends "base.html" %}

{% block content %}
<h2>Mes articles</h2>

{% if articles %}
<div class="article-list">
    {% for a in articles %}
    <div class="article-card">
        <h3>
            <a href="/article/{{ a.id }}">{{ a.title }}</a>
        </h3>

        {% if a.image_url %}
        <img src="{{ a.image_url }}" alt="{{ a.title }}" class="article-image" />
        {% endif %}

        <p>{{ a.content|truncate(150) }}</p>

        <div class="article-meta">
            <span><i class="fas fa-calendar"></i> {{ a.created_at|format_date }}</span>
            <span><i class="fas fa-heart"></i> {{ a.likes_count }}</span>
            <span><i class="fas fa-comment"></i> {{ a.comments_count }}</span>
        </div>

        <div class="article-actions">
            <a href="/article/{{ a.id }}" class="btn btn-primary">Voir</a>
            <a href="/edit-article/{{ a.id }}" class="btn btn-secondary">Modifier</a>
        </div>
    </div>
    {% endfor %}
</div>
{% else %}
<div class="empty-state">
    <i class="fas fa-newspaper fa-3x"></i>
    <h3>Aucun article créé</h3>
    <p class="empty_desc">Vous n'avez pas encore publié d'articles.</p>
    <a href="/create-article" class="btn btn-primary">Créer un article</a>
</div>
{% endif %}

<style>
    .article-list {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(260px, 1fr));
        gap: 1.5rem;
        margin-top: 1rem;
    }

    .article-card {
        background: #fff;
        border-radius: 6px;
        padding: 1rem;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        display: flex;
        flex-direction: column;
        justify-content: space-between;
    }

    .article-card h3 {
        margin-bottom: .5rem;
    }

    .article-card h3 a {
        color: #007bff;
        text-decoration: none;
    }

    .article-card h3 a:hover {
        text-decoration: underline;
    }

    .article-image {
        width: 100%;
        height: 160px;
        object-fit: cover;
        border-radius: 4px;
        margin-bottom: .75rem;
    }

    .article-card p {
        flex: 1;
        color: #666;
        margin-bottom: .75rem;
    }

    .article-meta {
        font-size: .85rem;
        color: #888;
        display: flex;
        gap: .5rem;
        margin-bottom: .75rem;
    }

    .article-actions {
        display: flex;
        gap: .5rem;
    }

    .btn {
        flex: 1;
        text-align: center;
        padding: .5rem;
        border: none;
        border-radius: 4px;
        text-decoration: none;
        font-size: .9rem;
        cursor: pointer;
    }

    .btn-primary {
        background: #007bff;
        color: #fff;
    }

    .btn-primary:hover {
        background: #0056b3;
    }

    .btn-secondary {
        background: #6c757d;
        color: #fff;
    }

    .btn-secondary:hover {
        background: #545b62;
    }

    .empty-state {
        text-align: center;
        padding: 3rem 1rem;
        color: #666;
    }

    .empty-state i {
        margin-bottom: 1rem;
        color: #ddd;
    }

    .empty-state a.btn-primary {
        margin-top: 1rem;
    }

    .empty_desc {
        margin-top: 10px;
        margin-bottom: 20px;
    }

</style>
{% endblock %}